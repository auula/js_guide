<!DOCTYPE html>

<head>
    <title>Costom Event</title>
</head>

<body>
    <div id="square" style="background-color: greenyellow; width: 80px;height: 80px;"></div>
    <script>

        let square = document.getElementById("square");

        // 创建一个自定义事件，第一个参数为事件类型，第二个为上下文对象。
        let cn = new CustomEvent("ce", { detail: true });
        // 将自定义的事件通过 dispatchEvent 派发到某个对象上
        square.dispatchEvent(cn);

        setTimeout(function () {
            square.dispatchEvent(new CustomEvent("ce", { detail: false }));
        }, 3000);

        setTimeout(function () {
            square.dispatchEvent(new CustomEvent("ce", { detail: true }));
        }, 5000);

        // 把自定义的事件类型注册到监听器中
        square.addEventListener("ce", (e) => {
            if (e.detail) {
                square.style.backgroundColor = "blueviolet";
            } else {
                square.style.backgroundColor = "greenyellow";
            }
        });

    </script>
</body>

</html>